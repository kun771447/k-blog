# 性能优化介绍

## 什么是 Web 性能

MDN 上的 Web 性能定义：**Web 性能是网站或应用程序的客观度量和可感知的用户体验**

- **减少整体加载时间**: 减小文件体积、减少HTTP请求、使用预加载****
- **使网站尽快可用**: 仅加载首屏内容，其它内容根据需要进行懒加载平滑和交互性:使用CSS替代JS动画、减少U重绘
- **感知表现**: 你的页面可能不能做得更快，但你可以让用户感觉更快。耗时操作要给用户反馈，比如加载动画、进度条、骨架屏等提示信息
- **性能测定**: 性能指标、性能测试、性能监控持续优化

## 如何进行 Web 性能优化

- 先需要了解性能指标–多快才算快?

- 使用专业的工具可量化地评估出网站或应用的性能表现

- 然后立足于网站页面响应的生命周期，分析出造成较差性能表现的原因;

- 最后进行技术改造、可行性分析等具体的优化实施。

- 迭代优化

## 性能指标

- [RAIL 性能模型](https://web.dev/rail/)
- [基于用户体验的核心指标](https://web.dev/metrics/)
- 新一代性能指标: Web Vitals

## 性能测量

如果把对网站的性能优化比作一场旅程，它无疑会是漫长且可能还略带泥泞的，那之前我们有必要对网站进行性能测量，以知道优化的方向在何处。通常我们会借lI来完成性能测量，本节先简要介绍以下两个操作，后面会有独立章节详细介绍它式与生成报告的分析。



- 浏览器 DevTools 调试工具

- 灯塔(Lighthouse)
  
  - 网站整体质量评估，并给出优化建议

- WebPageTest
  
  - 多测试地点
  
  - 全面的性能报告



## 生命周期



网站页面的生命周期，通俗地讲就是从我们在浏览器的地址栏中输入一个 URL 后页面渲染出来的过程。整个过程包括域名解析，建立 TCP 连接，前后端通过HT7话，压缩与解压缩，以及前端的关键渲染路径等，把这些阶段拆解开来看，不仅得优化性能的启发，而且也能为今后的前端工程师之路构建出完整的知识框架



## 优化方案



- 从发出请求到收到响应的优化，比如DNS查询、HTTP长连接、HTTP 2、HTTP缓存等。

- 关键渲染路径优化，比如是否存在不必要的重绘和回流。

- 加载过程的优化，比如延迟加载，是否有不需要在首屏展示的非关键信息，占F载的时间。

- 资源优化，比如图片、视频等不同的格式类型会有不同的使用场景，在使用的恰当。

- 构建优化，比如压缩合并、基于webpack 构建优化方案等。