
# Buffer

Buffer 用于表示固定长度的字节序列，用来处理二进制流数据或者与之进行交互

Buffer 在创建时大小已经被确定且是无法调整的，在内存分配这块 Buffer 是由 C++ 层面提供而不是 V8

```
Node 运行时会有一个默认的内存限制，当 Node 操作的数量过大时就会抛出异常。一般有个这样的说法，32 位机器上 Node  内存限制 512 M,
62 位机器上限制内存 1 G。（Node 也给出了用户手动配置此界限的方法）
```

Buffer 是堆外内存。脱离了 Node 的内存限制

## Buffer.from

Buffer.from() 接受两个参数：第一个参数是要转换为 Buffer 的数据（可以是字符串、数组、或 ArrayBuffer），第二个参数是可选的编码方式（默认为 'utf8'）。
```
const b1 = Buffer.from('10');
const b2 = Buffer.from('10', 'utf8');
const b3 = Buffer.from([10]);
const b4 = Buffer.from(b3);

console.log(b1, b2, b3, b4);
```


`
ASCII（美国信息交换标准代码），它诞生于上世纪60年代初期。ASCII 最初设计用于表示英文字符、数字和一些常用符号，总共只有128个字符，这意味着它无法支持其他语言的字符，比如中文。

随着计算机技术的发展，特别是互联网的普及，人们需要更多的字符来表示不同语言和符号。于是 GBK 编码应运而生，它是 ASCII 的扩展，主要用于简体中文字符的编码。GBK 能够表示超过20,000个字符，包括汉字和中国常用的符号。

然而，随着全球化的发展，单一国家或地区的字符集已经无法满足人们日益增长的多语言交流需求。因此，Unicode 标准应运而生，它的目标是为世界上几乎所有的字符和符号提供一个唯一的数字标识。Unicode 采用多种编码方案，其中最常见的是 UTF-8 和 UTF-16。

UTF-8 是一种可变长度的编码方案，可以表示 Unicode 中的所有字符，它通过不同长度的字节序列来表示不同范围的字符，这使得它非常灵活且高效。

UTF-16 是另一种常见的 Unicode 编码方案，它使用16位编码单元来表示字符，因此在表示基本多文种平面（BMP）内的字符时，每个字符占用一个编码单元（两个字节），而在其他辅助平面上的字符则占用两个编码单元（四个字节）。
`


## Buffer.alloc

返回一个已初始化的 Buffer, 可以保证新创建的 Buffer 永远不会包含旧数据

```
const bAlloc1 = Buffer.alloc(10); // 创建一个大小为 10 个字节的缓冲区

console.log(bAlloc1); // <Buffer 00 00 00 00 00 00 00 00 00 00>
```

## Buffer.allocUnsafe

创建一个大小为 size 字节的未初始化的 Buffer， 由于是未初始化的 Buffer，因此分配的内存片段可能包含敏感数的旧据数据.
在 Buffer 内容可读的情况下，则可能会泄漏它的旧数据，这个是不安全的
```
const bAllocUnsafe1 = Buffer.allocUnsafe(10)
```

